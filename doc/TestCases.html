<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.3" />
<title></title>
<link rel="stylesheet" href="resources/diffkit.css" type="text/css" />
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){asciidoc.footnotes();}
/*]]>*/
</script>
<script type="text/javascript" src="resources/asciidoc-xhtml11.js"></script>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_test1">test1</h2>
<div class="sectionbody">
<div class="paragraph"><p>A basic sanity check that compares two identical DB tables using the most straightforward possible
comparison. Everything is wired explicitly into a PassthroughPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test2">test2</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two DB tables using the most straightforward possible comparison.
Everything is wired explicitly into a PassthroughPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test3">test3</h2>
<div class="sectionbody">
<div class="paragraph"><p>A basic sanity check that compares two identical File Tables using the most straightforward possible
comparison. Everything is wired explicitly into a PassthroughPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test4">test4</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two File tables using the most straightforward possible comparison.
Everything is wired explicitly into a PassthroughPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test5">test5</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two File tables using the most straightforward possible comparison.
Everything is wired explicitly into a PassthroughPlan. Plan limits diffs to ROW_DIFF diffs only.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test6">test6</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two File tables using the most straightforward possible comparison.
Everything is wired explicitly into a PassthroughPlan. Plan limits diffs to COLUMN_DIFF diffs only.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test7">test7</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two File tables using the most straightforward possible comparison.
Everything is wired explicitly into a PassthroughPlan. Plan limits total number of diffs (maxDiffs) to 2.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test8">test8</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two DB tables using the most automatic default provided by the MagicPlan. Only the two table names
and the ConnectionInfo are provided in the plan file. Everything else is figured out by MagicPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test9">test9</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two file tables using the most automatic default provided by the MagicPlan. Only the two file paths
and the file path for the Sink are provided in the plan file. Everything else is figured out by MagicPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test10">test10</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two DB tables using mostly automatic default provided by the MagicPlan. Plan specifies keyColumnNames,
which are different from the pk defined in the database for the target table. If alignment was carried out using
table pk (column1), all rows would be row diffs. Instead, engine is able to align the rows and produce only column diffs
because of the keyColumnName override (column3).</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test11">test11</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two file tables using mostly automatic default provided by the MagicPlan. Plan specifies keyColumnNames,
which are different from the default pk (first column) for file based tables. If alignment was carried out using
default pk (column1), all rows would be row diffs. Instead, engine is able to align the rows and produce only column diffs
because of the keyColumnName override (column3).</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test12">test12</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare heterogenous sources, lhs is DB rhs is FILE, using MagicPlan. Differences in table structure are
silently ignored by AutomaticTableComparison. Column3 is a BIGINT in the DB, but a STRING in the FILE,
because the FILE is only auto modelled. So the Diffor has to perform conversion.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test13">test13</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demonstrate the use of diffColumnNames and displayColumnNames in MagicPlan.  There are diffs in
column3 and column4. The plan uses diffColumnNames to limit the comparison to just column2,
ensuring that only row diffs are found (there are no column diffs in column2).  By default, only key columns
are used for display in the diff report, but the plan specifies that column1 and column3 should be used
in the display of rows within the diff report.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test14">test14</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demonstrate the use of ignoreColumnNames and displayColumnNames in MagicPlan.  There are diffs in
column3 and column4. The plan uses ignorefColumnNames to exclude column3 and column4 from diffing,
ensuring that only row diffs are found (there are no column diffs in column2).  By default, only key columns
are used for display in the diff report, but the plan specifies that column1 and column3 should be used
in the display of rows within the diff report.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test15">test15</h2>
<div class="sectionbody">
<div class="paragraph"><p>Test global numberTolerance and toleranceMap. MagicPlan will ensure that no numeric diffs of magnitude
less than 3 will be considered (numberTolerance =2), and that any diffs in COLUMN3 and COLUMN4 that
are not greater than 4 (toleranceMap; 4=COLUMN3,COLUMN4) will be ignored.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test16">test16</h2>
<div class="sectionbody">
<div class="paragraph"><p>Test DBSource where clause. There are two rows on the lhs (COLUMN1=0, 5555) that are not on the rhs.
By default, these would generate ROW diffs. However, we add a lhsWhereClause to the MagicPlan that
excludes all rows only the rhs that are not on the lhs. The result is that the diff report contains only
column diffs.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test17">test17</h2>
<div class="sectionbody">
<div class="paragraph"><p>Test the boundary case where one table (LHS) has rows, but the other table (RHS) is empty.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test18">test18</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare across different databases. Compare two DB tables using the most automatic
default provided by the MagicPlan. Only the two table names and the ConnectionInfo are
provided in the plan file. Everything else is figured out by MagicPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test19">test19</h2>
<div class="sectionbody">
<div class="paragraph"><p>Exercise of various SQL data types: VARCHAR, BIGINT, DATE, CHAR, TIME, INT,
DECIMAL, DOUBLE, REAL, TIMESTAMP, BOOLEAN, TINYINT, SMALLINT, CLOB</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test20">test20</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demos issue 5. The target DB tables do not have PK defined at the SQL level. User
has specified keyColumnNames in the plan file. DKDBSource must reorder the rows
appropriately for the key definition in the plan file to assure that there is only
1 row diff.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test21">test21</h2>
<div class="sectionbody">
<div class="paragraph"><p>Test of diffKind and maxDiffs properties in MagicPlan. Plan limits
diffs to ROW_DIFF diffs only, and maxDiffs of 2. If BOTH kinds of diffs were
reported, there would be 4 COLUMN_DIFFs, in addition to the 2 ROW_DIFFs. But the
diffKind property filters those out. If maxDiff was not specified, it would
default to a huge number (Long.MAX), and all 3 row diffs would be reported. But
since maxDiffs is specified to the MagicPlan, only the first 2 ROW_DIFFs are
reported.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test22">test22</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demonstrates ability of TestCaseRunner to test for Exceptions (or failures) of
a specified type. In this case, the MagicPlan file specifies displayColumnNames
that don&#8217;t exist in the sources. So we expect that the framework will throw an
appropriate exception.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test23">test23</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demonstrates withSummary option of the DKFileSink. Also demonstrates the
groupByColumnNames option.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test24">test24</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demonstrates the TextDiffor and how it can be used to compare CLOBs in a way
that is insensitive to newlines. Also demonstrates the use of the whereClause.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test25">test25</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demonstrates the use of dbTableName in MagicPlan. The table name is the
same on the LHS and RHS. Also demonstrates use of whereClause in MagicPlan.
The where clause is the same on the LHS and RHS.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test26">test26</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demonstrates SqlPatchSink, and how it is used to generate SQL statements
(INSERT, DELETE, UPDATE) in order to synchronize two tables. Also demonstrates
how DiffKit handles creating DML statements for Strings that contain embedded
single quotes (')</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test27">test27</h2>
<div class="sectionbody">
<div class="paragraph"><p>A basic sanity check that compares two identical Excel XLSX File Tables using the
most straightforward possible comparison. Everything is wired explicitly into a
PassthroughPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test28">test28</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare two spreadsheet file tables using mostly automatic default provided by
the MagicPlan. Only the two file names are provided in the plan file.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test29">test29</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare SpreadSheet tables using a PassthroughPlan. Demonstrates targeting an
explicitly named sheet, rather than defaulting to first sheet. Also demonstrates
a SpreadSheet that exercises all of the different data types available within
DiffKit for describing columns.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test30">test30</h2>
<div class="sectionbody">
<div class="paragraph"><p>Demonstrates situation where all columns in target tables are part of primary
key defined in the database. This covers issue #62. Even though it&#8217;s not possible
to search for column diffs in this scenario, DiffKit must still be able to properly
find row diffs.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test31">test31</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare SpreadSheet tables using a PassthroughPlan. Demonstrates leaving the sheet
name blank in the plan, so that the first sheet is used by default. Demonstrates
explicitly modeling the ROW_NUM, and how ROW_DIFFs are reported when using ROW_NUM
as the key. Demonstrates use of header row (hasHeader &#8594; true).
Exercises several different data types.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test32">test32</h2>
<div class="sectionbody">
<div class="paragraph"><p>This test is the same as test31, except that the key is COLUMN1 instead of &lt;ROW_NUM&gt;,
and the spreadsheets are not pre-sorted (isSorted = false), so that DiffKit has to
sort them internally before diff&#8217;ng.
Compare SpreadSheet tables using a PassthroughPlan. Demonstrates leaving the sheet
name blank in the plan, so that the first sheet is used by default. Demonstrates
how ROW_DIFFs are generated when rows are aligned on COLUMN1, instead of ROW_NUM
(e.g. Test31). Demonstrates use of header row (hasHeader &#8594; true).
Exercises several different data types.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test33">test33</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare SpreadSheet tables using a MagicPlan. Sheet name is not specified, so
that the first sheet is used by default. No key is specified in the plan, so
ROW_NUM will be used. Demonstrates how ROW_DIFFs are reported when using ROW_NUM
as the key. Demonstrates use of header row (hasHeader &#8594; true).
Exercises several different data types. This test is same as test31, except that
it is specified using a MagicPlan instead of the PassthroughPlan used in test31.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test34">test34</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare SpreadSheet tables using a MagicPlan. Key is COLUMN1 instead
of &lt;ROW_NUM&gt;, and the spreadsheets are not pre-sorted (isSorted = false), so
that DiffKit has to sort them internally before diff&#8217;ng. Demonstrates leaving
the sheet name blank in the plan, so that the first sheet is used by default.
Demonstrates how ROW_DIFFs are generated when rows are aligned on COLUMN1,
instead of ROW_NUM (e.g. Test31). Demonstrates use of header row (hasHeader &#8594;
true). Exercises several different data types. This is functionally same as
test32, except that this test is specified using a MagicPlan, whereas 32 uses a
PassthroughPlan.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test35">test35</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare a spreadsheet against a flat-file using a MagicPlan. Both the flat-file
and the SS have a header. Assumes that both files are already sorted. Also
demonstrate numerical tolerance. Without tolerance, values in COLUMN8 and COLUMN9
will be different in all rows.</p></div>
<div class="paragraph"><p>[N.B. Using a MagicPlan, it&#8217;s currently possible to diff spreadsheet vs. flat-file
only in the case where the key in the spreadsheet is type String. That&#8217;s because the
key type in the spreadsheet must match the key type in the flat-file, and all
columns are always typed to String in a flat-file when using a MagicPlan.]</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_test36">test36</h2>
<div class="sectionbody">
<div class="paragraph"><p>Compare a SpreadSheet on the LHS vs. a DB Source on the RHS, using a MagicPlan.
Demonstrates the use of ToleranceMap. Also highlights a bug in DiffKit data type
coercion. COLUMN5 has the same type (to the extent that you can clearly type SS
columns) in both the SS and the DB: Time. It&#8217;s read from both sources a java.sql.Time,
however there is some subtle difference in the way that the values are read that
results in different Time (reported by getTime()) values. So COLUMN5 generates
a diff in every row even though the values appear to be the same in the diff
report file.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2011-01-21 07:18:28 EST
</div>
</div>
</body>
</html>
